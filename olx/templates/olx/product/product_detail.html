{% load static %}
{% load thumbnail %}
<!DOCTYPE html>
<html lang="en">
  <head>
  
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <title>eCommerce Product Detail</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="{% static 'olx/css/create_product.css' %}">


</script> 

<script src="{% static 'js/bootstrap.min.js' %}"></script>
    <link rel="stylesheet" href="{% static 'olx/css/product_detail_style.css' %}">
    <!------ Include the above in your HEAD tag ---------->
    <style>
    ul#menu li {
  display:inline;
}
    </style>
  </head>

  <body>
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
                <div class="container">
                  <a class="navbar-brand" href="{% url 'olx:product_list' %}">Softvision Olx</a>
                  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                  </button>
                  <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav ml-auto">
                      <li class="nav-item"  {% if '/olx/createProduct/' in request.path %} class="active"{% endif %}>
                        <a class="nav-link" href="{% url 'olx:create_product' %}">Add Post
                          <span class="sr-only">(current)</span>
                        </a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" href="{% url "olx:my_all_post" %}">My Post
                        </a>
                      </li>
                      <!--<li class="nav-item">
                        <a class="nav-link" href="{% url "olx:logout_from_app" %}">Logout</a>
                      </li>-->
                      <li class="nav-item">
                        <a class="nav-link" href="#">Services</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" id="contact" href="#">Contact</a>
                      </li>&nbsp;&nbsp;
                      
                     
                    </ul>
                    
                  </div>
                </div>
                <!--<form action="{% url "olx:product_list" %}" method="GET">
                        <input type="text" placeholder="search..." name="q" value="{{ request.GET.q}}"/>
                        <input type="submit" value="submit" />
                       </form>-->
                       <ul class="nav navbar-nav navbar-right">
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                    <span class="glyphicon glyphicon-user"></span> 
                                    <strong>{{request.user.first_name}}</strong>
                                    <span class="glyphicon glyphicon-chevron-down"></span>
                                </a>
                                <ul class="dropdown-menu">
                                    <li>
                                        <div class="navbar-login">
                                            <div class="row">
                                                <div class="col-lg-4">
                                                    <p class="text-center">
                                                        <span class="glyphicon glyphicon-user icon-size"></span>
                                                    </p>
                                                </div>
                                                <div class="col-lg-8">
                                                    <p class="text-left"><strong>{{request.user.first_name}} {{request.user.last_name }}</strong></p>
                                                    <p class="text-left small">{{request.user.username}}@softvision.com</p>
                                                    <p class="text-left">
                                                        <a href="#" class="btn btn-primary btn-block btn-sm">Profile</a>
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                    <li class="divider"></li>
                                    <li>
                                        <div class="navbar-login navbar-login-session">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <p>
                                                        <a href="{% url "olx:logout_from_app" %}" class="btn btn-danger btn-block">Logout</a>
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </li>
                        </ul>
              </nav>
	
		<div class="container">
                
                <div class="row">

                       
                    
                    
                   
                    
               <div class="card">
                    <div class="container-fliud">
                        <div class="wrapper row">
                            <div class="preview col-lg-3 col-md-4 col-xs-6 thumb col-md-6">
                                    <ul class="" id="menu">
                                    {% for product in prodphoto %}
                                   
                                        <li> 
                                    <a class="thumbnail" href="#" data-image-id="" data-toggle="modal" data-title="This is my title" data-caption="Some lovely red flowers" data-image="{{ photo.file.url }}" data-target="#image-gallery">
                                            {% if product.photo__file %}

                                        <img class="img-responsive" src="/media/{{ product.photo__file}}" alt="Short alt text">
                                                {% else %}
                                                <img class="img-responsive" src="/media/photos/NoImage.jpg" alt="Short alt text">

                                                {% endif %}
                                    </a></li>
                                    
                                {% endfor %}
                               </ul>
                               
                            </div>
                            {% for product in prodphoto %}
                             {% if forloop.first %}
                            <div class="details col-md-6">
                                <h3 class="product-title">{{ product.name }}</h3>
                            
                                <p class="product-description">{{ product.description }}</p>
                                <h4 class="price">current price: <span>{{ product.price }}</span></h4>
                                <p>Seller:{{ product.created_by }}&nbsp;&nbsp;<span class="glyphicon glyphicon-earphone"></span>:&nbsp;{{product.contact}}</p>
                            
                            
                            </div>
                            {% endif %}

                            {% endfor %}
                        </div>
                    </div>
                </div>
                
            </div>
            <div class="modal fade" id="image-gallery" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
                                <h4 class="modal-title" id="image-gallery-title"></h4>
                            </div>
                            <div class="modal-body">
                                <img id="image-gallery-image" class="img-responsive" src="">
                            </div>
                            <div class="modal-footer">
                
                                <div class="col-md-2">
                                    <button type="button" class="btn btn-primary" id="show-previous-image">Previous</button>
                                </div>
                
                                <div class="col-md-8 text-justify" id="image-gallery-caption">
                                    This text will be overwritten by jQuery
                                </div>
                
                                <div class="col-md-2">
                                    <button type="button" id="show-next-image" class="btn btn-default">Next</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    </div>
		</div>
            <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
            <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet">
            <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
            
            <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
            <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
            <script>
           $(document).ready(function(){

loadGallery(true, 'a.thumbnail');

//This function disables buttons when needed
function disableButtons(counter_max, counter_current){
    $('#show-previous-image, #show-next-image').show();
    if(counter_max == counter_current){
        $('#show-next-image').hide();
    } else if (counter_current == 1){
        $('#show-previous-image').hide();
    }
}

/**
 *
 * @param setIDs        Sets IDs when DOM is loaded. If using a PHP counter, set to false.
 * @param setClickAttr  Sets the attribute for the click handler.
 */

function loadGallery(setIDs, setClickAttr){
    var current_image,
        selector,
        counter = 0;

    $('#show-next-image, #show-previous-image').click(function(){
        if($(this).attr('id') == 'show-previous-image'){
            current_image--;
        } else {
            current_image++;
        }

        selector = $('[data-image-id="' + current_image + '"]');
        updateGallery(selector);
    });

    function updateGallery(selector) {
        var $sel = selector;
        current_image = $sel.data('image-id');
        $('#image-gallery-caption').text($sel.data('caption'));
        $('#image-gallery-title').text($sel.data('title'));
        $('#image-gallery-image').attr('src', $sel.data('image'));
        disableButtons(counter, $sel.data('image-id'));
    }

    if(setIDs == true){
        $('[data-image-id]').each(function(){
            counter++;
            $(this).attr('data-image-id',counter);
        });
    }
    $(setClickAttr).on('click',function(){
        updateGallery($(this));
    });
}
});
            </script>
  </body>
</html>
